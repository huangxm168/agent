###########################
#         必选配置
###########################


# =========================
# VPS ID 和名称
# =========================

VPS_ID=1

# 该字段允许不存在或值为空，将降级使用默认值 Unknown 上报
VPS_NAME=Bandwagon - USCA_1

# =========================
# HMAC 密钥
# =========================

HMAC_SECRET=your-hmac-secret-key-at-least-16-chars

# =========================
# Server 接收端 API URL
# =========================

# Server 端上报接口完整 URL（包含协议、域名和路径）
# 三个 URL 全部必填，且必须互不相同
# 重试机制：首次使用 URL_1，第 1 次重试使用 URL_1（强制刷新 DNS），第 2 次重试使用 URL_2，第 3 次重试使用 URL_3
SERVER_URL_1=https://server1.example.com/api/latency/report
SERVER_URL_2=https://server2.example.com/api/latency/report
SERVER_URL_3=https://server3.example.com/api/latency/report

# =========================
# 调度配置
# =========================

# Ping 监测任务执行频率（无默认值）
# 允许值：1 或 2
# - 1：每分钟执行 1 次（任务超时 58 秒）
# - 2：每分钟执行 2 次（任务超时 29 秒）
PING_SCHEDULE_FREQUENCY=1

# Ping 监测任务调度偏移（默认：0）
# 每分钟第一次执行的秒数偏移，允许范围：0-59
# 频率为 1 时：offset 表示每分钟第几秒执行
# 频率为 2 时：
# - 0-29：第一次 = offset，第二次 = offset + 30
# - 30-59：第一次 = offset - 30，第二次 = offset
# 默认值 0 表示：
# - 频率 1：每分钟第 0 秒执行
# - 频率 2：每分钟第 0 秒和第 30 秒执行
# 示例：15 表示每分钟第 15 秒（频率 1）或第 15 秒和第 45 秒执行（频率 2）
PING_SCHEDULE_OFFSET=0

# =========================
# Ping 监测目标
# =========================

PING_TARGET_1=1101CM:icmp
PING_TARGET_2=1101CU:tcp
PING_TARGET_3=1101CT:icmp

# =========================
# Ping 模式
# =========================

# Ping 模式（默认：single）
# - single：单轮模式，每个目标仅监测一次
# - multi：多轮模式，每个目标监测多轮后聚合结果
PING_MODE=single

# =================================
# 基础 Ping 配置 (所有 Ping 模式共享)
# =================================

# 轮内间隔，单位毫秒（默认：100）
# 适用于单轮和多轮模式，控制监测点之间的间隔时间
PING_INTRA_DELAY=100

# 单次超时，单位毫秒（默认：2000）
# 适用于单轮和多轮模式，控制每次监测的超时时间
PING_TIMEOUT=2000

# =========================
# 多轮 Ping 配置 (仅多轮模式)
# =========================

# 监测轮数（默认：5）
# 仅在多轮模式下生效
#
# 允许范围：
# - Ping 频率为 1 时：3-8 轮（有 58 秒执行时间）
# - Ping 频率为 2 时：3-5 轮（只有 29 秒执行时间）
# 超出范围会自动调整并输出警告日志
#
# 判定阈值（严格过半数 > 50%）：
# - 3 轮：≥2 次成功/失败
# - 4 轮：≥3 次成功/失败
# - 5 轮：≥3 次成功/失败（推荐，40% 容错率）
# - 6 轮：≥4 次成功/失败
# - 7 轮：≥4 次成功/失败
# - 8 轮：≥5 次成功/失败
#
# 成功时取所有成功轮次的中位数延迟，轮数越多数据越稳定
MULTI_PING_ROUND=5

# 轮间间隔，单位毫秒（默认：200）
# 仅在多轮模式下生效，控制轮次之间的间隔时间
MULTI_PING_INTER_DELAY=200

# ==============================
# 执行模式
# ==============================

# 执行模式（默认：sequential）
# - parallel：并行模式，TCP 和 ICMP 同时开始
# - staggered：错峰模式，TCP 先启动，延迟后启动 ICMP
# - sequential：顺序模式，TCP 全部完成后再执行 ICMP
EXECUTION_MODE=sequential

# 错峰模式延迟时间，单位毫秒（默认：500）
# 仅在 EXECUTION_MODE=staggered 时生效
STAGGERED_DELAY=500


###########################
#         可选配置
###########################


# =========================
# DNS 配置
# =========================

# DNS 缓存 TTL 时间，单位分钟（默认：60）
DNS_CACHE_TTL=60

# DNS 解析总超时时间，单位秒（默认：3）
# 控制结果收集阶段的最长等待时间
DNS_TOTAL_TIMEOUT=3

# 单个上游查询超时时间，单位秒（默认：2）
# 控制每个 DNS 上游的查询超时
DNS_UPSTREAM_TIMEOUT=2

# 自定义 DNS 上游列表（逗号分隔 IP 地址）
#
# 如果不配置或留空，使用内置默认值：
# - 1.1.1.1（Cloudflare）
# - 8.8.8.8（Google）
# - 114.114.114.114（国内）
#
# 无论是否配置，系统 DNS 都会自动添加到上游列表末尾
# 最终上游列表 = 自定义/默认 DNS + 系统 DNS
#
# 示例：DNS_UPSTREAMS=1.1.1.1,8.8.8.8,223.5.5.5
DNS_UPSTREAMS=

# =========================
# 日志清理
# =========================

# 日志压缩保留天数（默认 15 天）
LOGS_COMPRESS_RETENTION_DAYS=15

# 日志压缩文件删除保留天数（默认 30 天）
LOGS_DELETE_RETENTION_DAYS=30

# 日志清理模块启用状态（默认 true）
LOGS_CLEANER_ENABLED=true